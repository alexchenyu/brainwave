# iOS 语音输入法商业化方案

## 产品定位

**AI 语音输入法** - 将语音实时转换为优化后的文本，直接输入到任何 App

### 核心价值主张
- 🎤 说话即输入，无需手动打字
- 🧠 AI 自动优化语法、标点、可读性
- ⚡ 实时处理，即说即得
- 🔒 隐私保护，API Key 用户自持或订阅制

---

## iOS 技术架构

### 1. App 组成部分

```
📱 主 App (Main App)
├── 用户注册/登录
├── 订阅管理
├── API Key 配置
├── 使用统计
└── 设置偏好

⌨️ 键盘扩展 (Keyboard Extension)
├── 语音输入按钮
├── 音频采集
├── 网络请求（调用后端 API）
├── 文本插入到当前 App
└── 共享配置（通过 App Group）
```

### 2. 技术实现路径

#### 方案 A：混合架构（推荐）

```
用户说话
    ↓
iOS 键盘扩展（录音）
    ↓
发送到你的服务器
    ↓
服务器调用 Whisper API（语音转文字）
    ↓
服务器调用 GPT-4o（文本优化）
    ↓
返回优化后的文本
    ↓
iOS 键盘插入文本
```

**成本**：~$0.01/分钟（比 Realtime API 便宜 93%）

#### 方案 B：完全本地（隐私优先）

```
用户说话
    ↓
iOS Speech Framework（本地识别）
    ↓
发送文本到服务器
    ↓
GPT-4o 优化文本
    ↓
返回优化后的文本
```

**优点**：免费语音识别，更快
**缺点**：iOS 语音识别质量不如 Whisper

---

## iOS 键盘扩展技术要点

### ✅ 可以做的事情
- 录制音频（需要请求麦克风权限）
- 发送网络请求
- 插入文本到当前 App
- 与主 App 共享数据（通过 App Group）
- 自定义 UI

### ⚠️ 限制
- **内存限制**：只有 ~50MB（主 App 可能有几百 MB）
- **网络限制**：后台可能被系统杀掉
- **权限限制**：首次使用需要用户授权完全访问
- **处理时间限制**：长时间处理可能被系统中断

### 🔑 关键技术点

#### 1. App Group（数据共享）
```swift
// 主 App 和键盘扩展共享配置
let sharedDefaults = UserDefaults(suiteName: "group.com.yourapp.brainwave")
sharedDefaults?.set(apiKey, forKey: "openai_api_key")
```

#### 2. 音频录制
```swift
import AVFoundation

class AudioRecorder {
    let audioSession = AVAudioSession.sharedInstance()

    func startRecording() {
        // 配置音频会话
        try? audioSession.setCategory(.record)
        try? audioSession.setActive(true)

        // 开始录音
        let audioEngine = AVAudioEngine()
        // ... 录音逻辑
    }
}
```

#### 3. 文本插入
```swift
import UIKit

class KeyboardViewController: UIInputViewController {
    func insertText(_ text: String) {
        textDocumentProxy.insertText(text)
    }
}
```

#### 4. 网络请求
```swift
func sendAudioToServer(audioData: Data) async throws -> String {
    let url = URL(string: "https://api.yourserver.com/transcribe")!
    var request = URLRequest(url: url)
    request.httpMethod = "POST"
    request.httpBody = audioData

    let (data, _) = try await URLSession.shared.data(for: request)
    let response = try JSONDecoder().decode(TranscriptionResponse.self, from: data)
    return response.text
}
```

---

## UI/UX 设计建议

### 键盘界面

```
┌─────────────────────────────────────┐
│  [取消]    正在录音...    [完成]    │
│                                     │
│          🎤                          │
│     ●  00:05                        │
│                                     │
│  "你好，这是一段测试语音..."        │
│                                     │
│  [✓ 自动优化]  [📝 原始文本]        │
└─────────────────────────────────────┘
```

### 功能按钮
- 🎤 **长按录音** - 主要交互方式
- ⚙️ **设置** - 跳转到主 App
- 🔄 **切换模式** - 原始转录 vs AI 优化

---

## 商业模式

### 定价策略

#### 方案 1：订阅制（推荐）
```
免费版：
- 每天 5 次使用（约 5 分钟）
- 基础文本转换
- 显示广告

基础版 - $4.99/月：
- 每天 30 次（约 1 小时）
- AI 文本优化
- 无广告

专业版 - $9.99/月：
- 无限使用
- 多种优化模式（正式/随意/简洁）
- 自定义提示词
- 多语言支持

企业版 - $29.99/月：
- 无限使用
- 团队账号
- API 集成
- 优先支持
```

#### 方案 2：自带 API Key
```
一次性购买 - $29.99：
- 终身使用
- 需要用户自己配置 OpenAI API Key
- 适合开发者/技术用户
```

### 收入预测（保守估算）

假设：
- DAU（日活）：1000 人
- 付费转化率：5%
- 平均客单价：$9.99/月

```
月收入 = 1000 × 5% × $9.99 = $499.50
年收入 = $499.50 × 12 = $5,994

如果 DAU 达到 10,000：
月收入 = $4,995
年收入 = $59,940
```

扣除成本：
- OpenAI API：~$1,000/月（假设每个付费用户每天 3 分钟）
- 服务器：$50-200/月
- Apple 税：30%

**净利润**：~$2,500/月（$30K/年）at 10K DAU

---

## 技术挑战

### 1. 键盘扩展内存限制
**问题**：iOS 键盘扩展只有 ~50MB 内存
**解决**：
- 不在键盘内做复杂处理
- 流式传输音频，不缓存完整文件
- 及时释放资源

### 2. 网络延迟
**问题**：用户等待时间过长体验差
**解决**：
- 显示实时转录进度
- 提供"快速模式"（只转录，不优化）
- 本地缓存常用短语

### 3. 权限问题
**问题**：iOS 键盘需要"完全访问"权限（用户可能担心隐私）
**解决**：
- 明确说明权限用途
- 提供隐私政策
- 强调数据不留存

### 4. 多语言支持
**问题**：用户可能切换语言
**解决**：
- 自动检测语言
- 提供语言切换按钮
- 支持混合语言输入

---

## 开发路线图

### Phase 1: MVP（4-6 周）
- [ ] iOS 键盘扩展基础框架
- [ ] 录音功能
- [ ] 调用 Whisper API 转录
- [ ] 文本插入功能
- [ ] 基础 UI

### Phase 2: 核心功能（4-6 周）
- [ ] AI 文本优化（GPT-4o）
- [ ] 用户账号系统
- [ ] 订阅/支付（StoreKit）
- [ ] 使用统计
- [ ] 设置页面

### Phase 3: 优化体验（4-6 周）
- [ ] 多种优化模式
- [ ] 实时转录显示
- [ ] 历史记录
- [ ] 快捷短语
- [ ] 性能优化

### Phase 4: 上线准备（2-4 周）
- [ ] App Store 审核准备
- [ ] 落地页/营销素材
- [ ] Beta 测试（TestFlight）
- [ ] 用户反馈收集
- [ ] Bug 修复

**总计：14-22 周（3.5-5.5 个月）**

---

## 竞品分析

### 现有产品

| 产品 | 特点 | 价格 | 评分 |
|------|------|------|------|
| **讯飞输入法** | 老牌语音输入 | 免费 | 4.8 |
| **Gboard** | Google 语音 | 免费 | 4.6 |
| **搜狗输入法** | 中文优化 | 免费 | 4.5 |
| **Otter.ai** | 会议转录 | $8.33/月 | 4.7 |

### 你的差异化优势

1. **AI 自动优化** - 不只是转录，还优化文本
2. **多场景模式** - 邮件/聊天/正式文档不同风格
3. **隐私优先** - 用户可自持 API Key
4. **跨平台** - Web + iOS（未来 Android）

---

## 风险与应对

### 风险 1: Apple 审核被拒
**可能原因**：
- 键盘应用审核严格
- 隐私政策不清晰
- 功能演示不充分

**应对**：
- 准备详细的审核说明
- 提供演示视频
- 确保隐私政策完善
- 提前研究审核指南

### 风险 2: 用户不愿意付费
**应对**：
- 提供免费试用
- 降低订阅价格（$2.99 起）
- 增加更多价值（如翻译、摘要）

### 风险 3: 成本过高
**应对**：
- 使用更便宜的方案（Whisper + GPT-4o-mini）
- 限制免费用户使用量
- 批量处理降低成本

### 风险 4: 技术难度
**应对**：
- 先做 MVP，验证市场
- 外包部分 iOS 开发
- 使用现有库/SDK

---

## 下一步行动

### 立即可做：
1. ✅ 注册 Apple Developer 账号（$99/年）
2. ✅ 创建 iOS 项目原型
3. ✅ 测试键盘扩展录音功能
4. ✅ 设计落地页（验证需求）

### 1-2 周内：
1. 完成 MVP 键盘扩展
2. 集成 Whisper API
3. TestFlight 内测
4. 收集 10-20 个用户反馈

### 1-2 月内：
1. 完善核心功能
2. 实现订阅系统
3. 提交 App Store 审核
4. 准备营销素材

---

## 总结

### 为什么做 iOS 输入法是好主意？

✅ **市场需求大** - 人人都需要打字
✅ **用户粘性强** - 每天都要用
✅ **变现模式清晰** - 订阅制
✅ **技术可行** - 基于现有代码改造
✅ **差异化明显** - AI 优化是独特卖点

### 预期收益
- 如果做到 5K DAU，2.5% 转化 → **$1.2K/月**
- 如果做到 50K DAU，5% 转化 → **$25K/月**
- 如果做到 100K DAU，5% 转化 → **$50K/月**

### 投入
- 时间：4-6 个月开发
- 成本：$100（Apple）+ $200/月（服务器）+ API 成本
- 风险：审核、用户接受度

**ROI（投资回报率）**：如果成功，3-6 个月回本。

---

要开始吗？我可以帮你：
1. 创建 iOS 项目框架
2. 实现键盘扩展 MVP
3. 设计 API 接口（服务器端）
4. 准备落地页文案
